# python升级脚本
命令是 python uploadReview.py 要升级的库的名字
例如：升级分享库 python uploadReview.py moon_share 
python脚本会自动帮你升级版本库并且上传到maven库中

CurrentVersionTemp.properties为升级过程中的临时文件，记录当前包的版本信息和升级过程中依赖库的成功与失败，如果最终整个链上的库都升级完毕后，会删除该文件，如果升级失败，可以在文件中查看到失败的库是哪个。

HighlibVersionReview.properties文件 在脚本运行的时候会抓取每个库的maven.gradle文件中的MAVEN_ARTIFACT_ID 的版本号最为最新的版本信息记录下来。库文件升级的时候会将build.gradle中依赖的库按照这个表替换为最新的库，然后再去升级。


错误机制：如果上传失败，修改错误后再次运行脚本，会自动帮你跳过已经打包成功的包
例如 A -> B -> C 
此时  升级失败了 链中存在错误 
如果C失败了，修改C 再次升级 则 A 和B 直接跳过，重新打包C
如果C失败了，修改 A ，因为A已经成功打包，但是修改了A，这时候调整了A的版本号，才会再次将A打包，再次升级 则会重新升级整条链上的库

注：如果要换一个链条升级，需要删除CurrentVersionTemp.properties文件

### 整体流程
#### 准备操作：
先遍历整个文件夹 寻找所有可编译的库lib_list。
然后遍历整个文件夹，初始化所有model的Library的信息
根据输入的要升级的库，去做升级操作。
#### 第一步要 升级序列
升级操作 是先发送升级报告给依赖库 收到消息的依赖库，维护一个队列，将收到的消息存储下来准备升级，然后依赖库将向自己要升级的消息继续发送给她的依赖库 直到发送到顶层的的依赖库，这样就确定好整个依赖的升级序列。
第二步 升级
#### 升级第一个版本库
如果是升级依赖的版本库，需要1.先修改maven.gradle中MAVEN_VERSION的版本，默认升级最小的版本号加一，然后2.要将build.gradle中的依赖替换为最新的依赖，
#### 第三步 发送消息
升级完成之后，发送升级完成的报告给依赖库，收到消息的依赖库，将自己队列中存储的消息清除，然后判断消息队列中是否有其他消息，如果没有其余消息，就开始做自己的升级操作，升级完成之后，继续向他的依赖通知消息，如果有其他消息，就不做任何操作，直到没有消息，才开始升级


